<!DOCTYPE html>
<html lang="en">
<head>
  <title>xcloud</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <style type="text/css" media="screen">
    #editor { 
        height: 650px;
    }
   .ace_editor .ace_marker-layer .ace_active-line {
      background: #3e3f41;}
   .row div {
     padding-left: 2px;
     padding-right: 2px;
   }
  </style>  
</head>
<body>

<div class="container-fluid">
  
  <nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#"><span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span></a>
      <a class="navbar-brand" onclick="$('#about').modal()">xcloud</a>
      <a class="navbar-brand" href="#"></a>
      <a class="navbar-brand" href="#"></a>
      <a class="navbar-brand" href="#"></a>
      <a class="navbar-brand" href="#"></a>
      <a class="navbar-brand" href="#"></a>
    </div>
    <ul class="nav navbar-nav">
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">File
        <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="#">New</a></li>
          <li><a onclick="$('#openfile').modal()">Open</a></li>
          <li><a onclick="SendFile()">Save</a></li>
          <li class="divider"></li>
          <li><a href="#">Close</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Edit
        <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a onclick="document.execCommand('cut')">Cut</a></li>
          <li><a onclick="document.execCommand('copy')">Copy</a></li>
          <li><a onclick="document.execCommand('paste')">Paste</a></li>
        </ul>
      </li>
      <form class="navbar-form navbar-left" action="">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Search">
          <div class="input-group-btn">
            <button class="btn btn-default" type="submit">
              <i class="glyphicon glyphicon-search"></i>
            </button>
          </div>
        </div>
      </form>
      <li><button class="btn btn-primary navbar-btn" onclick="editor.findPrevious()"><span class="glyphicon glyphicon-arrow-left"></span></button></li>
      <li><button class="btn btn-primary navbar-btn" onclick="editor.findNext()"><span class="glyphicon glyphicon-arrow-right"></span></button></li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Project
        <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="#">Open</a></li>
          <li><a href="#">Save</a></li>
          <li><a href="#">Close</a></li>
          <li class="divider"></li>
          <li><a href="#">Add item</a></li>
          <li><a href="#">Remove item</a></li>
        </ul>
      </li>
      <li><button class="btn btn-success navbar-btn"><span class="glyphicon glyphicon-flash"></span> Run</button></li>
      <li><a href="#">Help</a></li>
    </ul>
    <ul class="nav navbar-nav navbar-right">
      <li><a href="#"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
      <li><a onclick="$('#login').modal()"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
    </ul>
  </div>
</nav>

  <div class="row">
    <div class="col-sm-2">
       <nav class="navbar navbar-expand-lg navbar-inverse">
         <a class="navbar-brand" href="#">Files</a>
       </nav>                                  
       <ul style="background-color:gray;height:580px;">
         <li>PRGs
           <ul>                                
             <li style="color:white;">noname.prg</li>
           </ul>
         </li>
         <li>CHs</li>                                
       </ul>                                    
    </div>
                                         
    <div class="col-sm-8">
<div id="editor">#include "xcloud.ch"

function Main()
 
   MsgInfo( "Hello world from xcloud" )
    
return nil</div></div>
    <div class="col-sm-2">
       <nav class="navbar navbar-expand-lg navbar-inverse">
         <a class="navbar-brand" href="#">Methods and functions</a>
       </nav>  
    </div>
  </div> 
</div>
  
<script src="./src-noconflict/ace.js" type="text/javascript" 
charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/pastel_on_dark");
    editor.setFontSize(18);     
    editor.setHighlightActiveLine(true);
    editor.session.setMode("ace/mode/c_cpp");
</script>  

<div class="modal fade" id="login" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Login</h5>
      </div>
      <div class="modal-body" style="padding:40px 50px;">
        <form role="form">
          <div class="form-group">
            <label for="usrname"><span class="glyphicon glyphicon-user"></span> Username</label>
            <input type="text" class="form-control" id="usrname" placeholder="Enter email">
          </div>
          <div class="form-group">
            <label for="psw"><span class="glyphicon glyphicon-eye-open"></span> Password</label>
            <input type="text" class="form-control" id="psw" placeholder="Enter password">
          </div>
          <div class="checkbox">
            <label><input type="checkbox" value="" checked>Remember me</label>
          </div>
          <button type="submit" class="btn btn-success btn-block"><span class="glyphicon glyphicon-off"></span> Login</button>
        </form>
      </div>
      <div class="modal-footer">
        <p>Not a member? <a href="#">Sign Up</a></p>
        <p>Forgot <a href="#">Password?</a></p>
      </div>
    </div>
  </div>
</div> 

<div class="modal fade" id="about" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">About</h5>
      </div>
      <div class="modal-body" style="padding:40px 50px;">
        <p>xcloud - The Harbour IDE on the clouds</p><br>
        <p>(c) FiveTech Software 2018</p>
      </div>
      <div class="modal-footer">  
        <button class="btn btn-success btn-lg" data-dismiss="modal">Ok</button>
      </div> 
    </div>
  </div>
</div> 

<div class="modal fade" id="openfile" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Select a file</h5>
      </div>
      <div class="modal-body" style="padding:40px 50px;">
        <input type="file" id="myFile">
      </div>
      <div class="modal-footer">  
        <button class="btn btn-success btn-lg" onclick="OpenFile()" data-dismiss="modal">Ok</button>
      </div> 
    </div>
  </div>
</div> 
  
</body>
  
<script>  
function OpenFile()
{
   var input = document.getElementById( "myFile" );
   var reader;
   
   if( input.files )
   {
      reader = new FileReader();
     
      reader.addEventListener( 'load', function( e ) {
         editor.setValue( e.target.result, -1 ); } );
         
      reader.readAsBinaryString( input.files[ 0 ] ); 
   }
}   
  
function SendFile( cFileName )
{
   var formData = new FormData();
   var xhr = new XMLHttpRequest();
   var myblob = new Blob( [ editor.getValue() ], {
                type: 'text/plain' } );
  
   formData.append( "test", myblob, "test.prg" );
   xhr.onreadystatechange = function() { 
     if( this.readyState == XMLHttpRequest.DONE && this.status == 200 ) {
        alert( this.responseText );
    } 
   };
   xhr.open( "POST", 'https://www.fivetechsoft.com/xcloud/upload.php' );
   xhr.send( formData );
}
  
</script>  
  
</html>
